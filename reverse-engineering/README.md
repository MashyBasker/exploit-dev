## General pointers

### 1. x86, CPU and memories

- a 32-bit CPU executes 4 byte instructions one after the another as fetched by the CPU cycle.
- address and data are both stored as hex.
- most attacks are focussed on 32-bit architecture machines because 64 bit machines are backward compatible and if the exploit runs on a 32 bit machine, then it can also run  in a 64 bit machine.

**1.1 Components of a CPU**
```mermaid
graph TD;
    1[Control Unit];
    2[Execution Unit];
    3[Registers];
    4[Flags];
    1---2;
    2---3;
    2---4;
```

### 2. Registers

> **Note**: The CPU has EIP register to store the next machine instruction. If we can manipulate this EIP register, we can do nasty things. This is a popular malware technique.

**2.1 General Purpose Registers**

These are registers are for storing data temporarily.

`eax`: also known as *accumulator*. Stores the result after arithmetic operations and function return values.

`ebx`: points to the data segment. It is the base pointer for memory access.

`ecx`: counter register. Used to maintain count. Used for looping and string operations.

`edx`: used for I/O operations. Extends `eax` to 64-bit

`esi`: source index register. For address and memory copying. Stores the base address of the string or array to be copied.

`edi`: destination index register. Stores the destination address for the string or array to be copied.

`ebp`: base pointer. a register pointing to the bottom of the stack.

`esp`: stack pointer. a register pointing to the top of the stack.

**2.2 Registers and their sizes**

`eax` is a 32-bit register. It's 16-bit equivalent is `ax`. `ax` can be further divided into `ah` and `al` representing the high and low pair respectively.

```
+-------------------------------------+
|                 |    AH       |      AL     |
|                 |<--------- AX ------->|           
|                 |         16-bit               |
<--------------- EAX ----------------->
                     32-bit
```

Registers like ESI, EDI, EBP and ESP have are 32-bits but can be broken down to their 16-bit representative i.e SI, DI, BP and SP.

